<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Manage Webform Presets</title>
  <link rel="stylesheet" href="styles/options.css">
  <link rel="stylesheet" href="styles/modal.css">
</head>
<body>
  <div class="options-container">
    <header class="header">
      <h1>ğŸ” Webform Presets Manager</h1>
      <div class="header-actions">
        <div id="sync-status" class="sync-status" title="Checking connection...">
          <span class="status-dot"></span>
          <span class="status-text">Checking...</span>
        </div>
        <button id="lock-btn" class="btn-secondary">ğŸ”’ Lock</button>
      </div>
    </header>
    
    <div id="locked-view" class="locked-view" style="display: none;">
      <div class="lock-screen">
        <div class="lock-icon">ğŸ”’</div>
        <h2>Management Console is Locked</h2>
        <p>Enter your master password to manage your presets</p>
        <button id="unlock-options-btn" class="primary-btn">Unlock</button>
      </div>
    </div>
    
    <div id="unlocked-view" class="unlocked-view" style="display: none;">
      <nav class="sidebar">
        <div class="nav-section">
          <h3>Actions</h3>
          <button id="export-btn" class="nav-btn">
            <span class="icon">ğŸ“¤</span> Export
          </button>
          <button id="import-btn" class="nav-btn">
            <span class="icon">ğŸ“¥</span> Import
          </button>
        </div>
        
        <div class="nav-section">
          <h3>Search</h3>
          <input 
            type="text" 
            id="search-input" 
            placeholder="Search presets..."
            class="search-input"
          >
        </div>
        
        <div class="nav-section">
          <h3>Statistics</h3>
          <div class="stats">
            <div class="stat-item">
              <span class="stat-label">Collections:</span>
              <span id="total-collections" class="stat-value">0</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Total Presets:</span>
              <span id="total-presets" class="stat-value">0</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Domains:</span>
              <span id="total-domains" class="stat-value">0</span>
            </div>
          </div>
        </div>
        
        <div class="nav-section danger-zone">
          <h3>âš ï¸ Danger Zone</h3>
          <button id="delete-all-btn" class="nav-btn btn-danger">
            <span class="icon">ğŸ—‘ï¸</span> Delete All Collections
          </button>
          <p class="danger-help">This will remove all presets from all collections. Cannot be undone.</p>
        </div>
      </nav>
      
      <main class="main-content">
        <div class="content-header">
          <h2>Your Presets</h2>
          <div class="view-controls">
            <button id="expand-all-btn" class="btn-small">Expand All</button>
            <button id="collapse-all-btn" class="btn-small">Collapse All</button>
          </div>
        </div>
        
        <div id="presets-container" class="presets-container">
          <div class="empty-state">
            <div class="empty-icon">ğŸ“‹</div>
            <h3>No Presets Yet</h3>
            <p>Start by visiting a website and saving a form as a preset</p>
          </div>
        </div>
      </main>
    </div>
  </div>
  
  <!-- Hidden file input for import -->
  <input type="file" id="file-input" accept=".zip,.json" style="display: none;">
  
  <!-- Export dialog -->
  <div id="export-dialog" class="modal-overlay" style="display: none;">
    <div class="modal-content">
      <h2>Export Preset Collections</h2>
      <p>Choose what to export:</p>
      <div class="export-options">
        <label class="radio-option">
          <input type="radio" name="export-type" value="current" checked>
          <div>
            <span>Current Collection Only</span>
            <small>Export presets from the currently unlocked collection</small>
          </div>
        </label>
        <label class="radio-option">
          <input type="radio" name="export-type" value="all">
          <div>
            <span>All Collections</span>
            <small>Export collections (encrypted data remains secure)</small>
          </div>
        </label>
      </div>
      <div class="modal-actions">
        <button id="export-cancel-btn" class="btn-secondary">Cancel</button>
        <button id="export-confirm-btn" class="btn-primary">Export</button>
      </div>
    </div>
  </div>

  <div id="confirm-dialog" class="modal-overlay" style="display: none;">
    <div class="modal-content">
      <h2 id="confirm-title">Confirm Action</h2>
      <div id="confirm-message" style="white-space: pre-wrap; margin: 1rem 0;"></div>
      <div class="modal-actions">
        <button id="confirm-cancel-btn" class="btn-secondary">Cancel</button>
        <button id="confirm-ok-btn" class="btn-primary">OK</button>
      </div>
    </div>
  </div>
  
  <script src="lib/jszip.min.js"></script>
  <script src="scripts/utils.js"></script>
  <script src="scripts/options.js"></script>
</body>
</html>
